# Wallhaven壁纸下载器

一个基于PyQt5的Wallhaven壁纸批量下载工具，支持多种下载方式和自定义设置。

## 功能特性

- 🖼️ **多种下载方式**：支持下载最新壁纸、从指定类别下载、通过关键词搜索下载
- 🚀 **并发下载**：支持多线程并发下载，提高下载效率
- 🎨 **美观界面**：采用液态玻璃效果设计，支持浅色/深色主题切换
- 🔍 **图片预览**：实时预览已下载的图片
- 📁 **自定义下载目录**：可自由选择壁纸保存位置
- ⚙️ **丰富设置**：可调整并发数、超时时间、预览大小等参数
- 📋 **下载页数无限制**：可设置任意页数进行下载

## 主要功能

1. **多种下载方式**：
   - 从指定类别下载（支持general、anime、people等类别）
   - 下载最新壁纸（toplist）
   - 从搜索结果下载

2. **壁纸筛选**：
   - 支持按纯度筛选（sfw、sketchy、nsfw）
   - 支持按壁纸比例筛选（横向、纵向、正方形等）

3. **下载管理**：
   - 支持多线程并发下载
   - 支持断点续传功能
   - 自动跳过重复文件
   - 下载进度实时显示

4. **界面功能**：
   - 现代化液态玻璃效果界面
   - 图片预览功能
   - 系统托盘支持
   - 自定义主题设置

## 使用方法

### 方法一：直接运行可执行文件

1. 从[Releases](https://github.com/XQGIN/wallhaven_downloader/releases)页面下载最新的`WallpaperDownloader.exe`安装程序
2. 双击运行安装程序，按照提示完成安装
3. 安装完成后，可以从桌面快捷方式或开始菜单启动程序

### 方法二：从源码运行

1. 确保已安装Python 3.7+和pip
2. 克隆本仓库：
   ```
   git clone https://github.com/XQGIN/wallhaven_downloader.git
   cd wallhaven_downloader
   ```
3. 安装依赖：
   ```
   pip install -r requirements.txt
   ```
4. 运行程序：
   ```
   python main.py
   ```
### 2. 选择下载方式

程序提供三种下载方式：

- **从指定类别下载**：选择此选项后，可以设置类别和纯度
  - 类别：all（全部）、general（一般）、anime（动漫）、people（人物）、ga（一般+动漫）、gp（一般+人物）
  - 纯度：sfw（安全）、sketchy（轻度）、nsfw（成人）、ws（安全+轻度）、wn（安全+成人）、sn（轻度+成人）、all（全部）

- **下载最新壁纸**：下载Wallhaven网站上的最新热门壁纸

- **从搜索下载**：输入关键词搜索并下载相关壁纸

### 3. 设置壁纸比例

选择您希望下载的壁纸比例：

- 全部：不限制比例
- 横向壁纸：16x9、32x9、21x9等横向比例
- 纵向壁纸：9x16、9x18等纵向比例
- 正方形壁纸：1x1比例
- 自定义比例：包含所有比例选项

### 4. 设置下载参数

- **下载页数**：设置要下载的页数（1-999999）
- **下载目录**：点击"浏览"按钮选择壁纸保存位置

### 5. 开始下载

点击"开始下载"按钮开始下载壁纸。下载过程中：

- 可以通过进度条查看下载进度
- 状态标签会显示当前下载的文件名
- 已下载的图片会显示在右侧预览区域
- 可以随时点击"停止下载"按钮暂停下载

### 6. 断点续传

如果下载过程中关闭了程序，下次启动时会自动检测未完成的下载任务，并询问是否恢复下载。选择"是"可以继续之前的下载任务。

### 7. 图片预览

- 下载完成的图片会显示在右侧预览区域
- 双击预览图片可以查看原图
- 点击"清除预览"按钮可以清空预览区域
- 点击"打开下载目录"按钮可以打开壁纸保存文件夹

### 8. 设置选项

点击"设置"按钮可以打开设置对话框，包含以下选项：

**下载设置**：
- 并发下载数：设置同时下载的图片数量（1-10）
- 自动跳过重复文件：开启后会自动检测并跳过已下载的文件
- 下载失败重试次数：设置下载失败后的重试次数（1-10）

**界面设置**：
- 主题颜色：选择界面主题颜色（浅色、深色、蓝色、绿色、紫色）
- 玻璃透明度：调整界面玻璃效果的透明度（0-255）
- 预览图片大小：设置预览图片的显示大小（小、中、大）

### 9. 系统托盘功能

在Windows系统中，关闭窗口时程序会最小化到系统托盘：

- 托盘图标会显示程序状态
- 双击托盘图标可以显示/隐藏主窗口
- 右键点击托盘图标可以显示菜单，包含显示窗口和退出选项
- 如果下载正在进行，最小化到托盘时会显示提示信息

### 10. 退出程序

可以通过以下方式退出程序：

- 点击主窗口右下角的"退出"按钮
- 在系统托盘图标上右键，选择"退出"选项
- 如果下载正在进行，会询问是否停止下载并退出

## 注意事项

1. **API密钥**：程序使用默认API密钥访问Wallhaven API，如果遇到访问限制，可以在设置中更换为自己的API密钥。

2. **下载限制**：Wallhaven网站对API访问有限制，请合理设置并发下载数量，避免请求过于频繁。

3. **文件命名**：下载的壁纸会以Wallhaven的ID命名，例如"wallhaven-1abcde.jpg"。

4. **重复文件**：程序会自动检测并跳过重复文件，避免重复下载。

5. **系统要求**：程序需要Python 3.x环境，并依赖PyQt5库。

## 常见问题

### Q: 下载失败怎么办？
A: 检查网络连接，确认Wallhaven网站可以正常访问。如果问题持续，可以尝试减少并发下载数量或增加重试次数。

### Q: 如何更换API密钥？
A: 在设置对话框中，可以输入自己的Wallhaven API密钥。获取API密钥需要注册Wallhaven账号。

### Q: 程序最小化后找不到怎么办？
A: 在Windows系统中，程序会最小化到系统托盘。可以在任务栏右侧的通知区域找到程序图标，双击显示主窗口。

### Q: 如何更改界面主题？
A: 点击"设置"按钮，在"界面设置"选项卡中可以选择不同的主题颜色和调整玻璃透明度。

### Q: 下载的图片保存在哪里？
A: 默认保存在"图片\Wallhaven"文件夹下，可以在下载设置中更改保存位置。


## 联系方式

如有问题或建议，可以通过以下方式联系：

- GitHub：https://github.com/XQGIN
- 作者：XQGIN

## License


[MIT](LICENSE)



